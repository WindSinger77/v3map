(()=>{"use strict";var t,e={291:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var n,r="object"===("undefined"==typeof Reflect?"undefined":e(Reflect))?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function u(){u.init.call(this)}t.exports=u,t.exports.once=function(t,e){return new Promise((function(n,r){function o(n){t.removeListener(e,i),r(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),n([].slice.call(arguments))}b(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&b(t,"error",e,{once:!0})}(t,o)}))},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var a=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+e(t))}function s(t){return void 0===t._maxListeners?u.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var o,i,u,a;if(c(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),u=i[e]),void 0===u)u=i[e]=n,++t._eventsCount;else if("function"==typeof u?u=i[e]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),(o=s(t))>0&&u.length>o&&!u.warned){u.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=u.length,a=f,console&&console.warn&&console.warn(a)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=l.bind(r);return o.listener=n,r.wrapFn=o,o}function p(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):v(o,o.length)}function y(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function b(t,n,r,o){if("function"==typeof t.on)o.once?t.once(n,r):t.on(n,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+e(t));t.addEventListener(n,(function e(i){o.once&&t.removeEventListener(n,e),r(i)}))}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},u.prototype.getMaxListeners=function(){return s(this)},u.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var u;if(e.length>0&&(u=e[0]),u instanceof Error)throw u;var a=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw a.context=u,a}var c=i[t];if(void 0===c)return!1;if("function"==typeof c)o(c,this,e);else{var s=c.length,f=v(c,s);for(n=0;n<s;++n)o(f[n],this,e)}return!0},u.prototype.addListener=function(t,e){return f(this,t,e,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(t,e){return f(this,t,e,!0)},u.prototype.once=function(t,e){return c(e),this.on(t,h(this,t,e)),this},u.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,h(this,t,e)),this},u.prototype.removeListener=function(t,e){var n,r,o,i,u;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){u=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,u||e)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},u.prototype.listeners=function(t){return p(this,t,!0)},u.prototype.rawListeners=function(t){return p(this,t,!1)},u.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},u.prototype.listenerCount=y,u.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},210:(t,e,n)=>{var r=n(418),o=n(810);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}function p(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var y=function(){function t(){l(this,t)}return p(t,[{key:"transform",value:function(t){t.x,t.y}}]),t}(),v=function(t){a(n,t);var e=s(n);function n(t,r){var o;return l(this,n),(o=e.call(this))._offsetX=t,o._offsetY=r,o}return p(n,[{key:"transform",value:function(t){var e=t.x,n=t.y;return{x:e+this._offsetX,y:n+this._offsetY}}}]),n}(y),b=function(t){a(n,t);var e=s(n);function n(t){var r;return l(this,n),(r=e.call(this))._scale=t,r}return p(n,[{key:"transform",value:function(t){var e=t.x,n=t.y;return{x:e*this._scale,y:n*this._scale}}}]),n}(y),d=function(t){a(n,t);var e=s(n);function n(t){var r;return l(this,n),(r=e.call(this))._convertor=t,r}return p(n,[{key:"transform",value:function(t){var e,n,r=t.x,o=t.y,i=(e=this._convertor([r,-o]),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{x:i[0],y:-i[1]}}}]),n}(y),m=function(t){a(n,t);var e=s(n);function n(t){var r;return l(this,n),(r=e.call(this))._children=t&&t.length?t:[],r}return p(n,[{key:"transform",value:function(t){var e={x:t.x,y:t.y};return this._children.forEach((function(t){e=t.transform(e)})),e}}]),n}(y);const _={background:{color:"#111140",light:{color:3421434,intensity:5}},id:function(t){return((t||{}).properties||{}).adcode},center:function(t){var e=(t||{}).properties||{},n=e.centroid,r=e.center;return n||r},name:function(t){return((t||{}).properties||{}).name},depth:.2,ppi:254,scale:1,color:function(){return new r.Ilk("hsl(\n            ".concat(30*Math.random()+55,"%,\n            ").concat(30*Math.random()+55,"%,\n            ",233,"\n            )"))},emissive:3437398,roughness:.8,metalness:.8,opacity:.8,transparent:!0,border:{show:!1,depthDelta:.001,color:16777215,weight:1},dataLabel:{show:!1,className:"v3map-data-datalabel",style:{color:"#ffffff",fontSize:"12px"}},dataMark:{show:!1,scale:1,transparent:!0},flowing:{show:!1,minDepthDelta:1e-4,maxDepthDelta:1,weight:.02},events:{select:{border:{color:16711680,weight:2}}}};function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===g(o)?o:String(o)),r)}var o}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._animations=[]}var e,n;return e=t,(n=[{key:"hasAnimation",value:function(){return this._animations&&this._animations.length}},{key:"addAnimation",value:function(t){this._animations.unshift(t)}},{key:"animate",value:function(){for(var t=this._animations.length-1;t>=0;t--){var e=this._animations[t];e.isCompleted()?(e.stop(),this._animations.splice(t,1)):e.animate()}}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),j=n(291);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}function T(t,e,n){return e&&R(t.prototype,e),n&&R(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var M=6378137,A=function(t){var e=C(t,2),n=e[0],r=e[1],o=n*Math.PI/180*M,i=r*Math.PI/180;return[o,M/2*Math.log((1+Math.sin(i))/(1-Math.sin(i)))]},D=function(){function t(){E(this,t),this._startPoint=null,this._endPoint=null}return T(t,[{key:"grope",value:function(t){var e=C(t,2),n=e[0],o=e[1],i=C(A([n,o]),2),u=i[0],a=i[1];this._startPoint&&this._endPoint?(this._startPoint.set(Math.min(this._startPoint.x,u),Math.min(this._startPoint.y,a)),this._endPoint.set(Math.max(this._endPoint.x,u),Math.max(this._endPoint.y,a))):(this._startPoint=new r.FM8(u,a),this._endPoint=new r.FM8(u,a))}},{key:"getTransformation",value:function(t){var e=this.getCenterPoint(),n=e.x,r=e.y;return new m([new d(A),new v(-n,-r),new b(t)])}},{key:"getStartPoint",value:function(){return this._startPoint}},{key:"getEndPoint",value:function(){return this._endPoint}},{key:"getCenterPoint",value:function(){return{x:(this._startPoint.x+this._endPoint.x)/2,y:(this._startPoint.y+this._endPoint.y)/2}}},{key:"getWidth",value:function(){return this._endPoint.x-this._startPoint.x}},{key:"getHeight",value:function(){return this._endPoint.y-this._startPoint.y}}]),t}(),B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=k(e);if(n){var o=k(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return x(t)}(this,t)});function o(t){var e;return E(this,o),(e=r.call(this))._crop=new D,e._configuration=t,e._animating=!1,e._animationManager=new O,e.animate=e.animate.bind(x(e)),e}return T(o,[{key:"grope",value:function(t){var e=C(t,2),n=e[0],r=e[1];this._crop.grope([n,r])}},{key:"getPPI",value:function(){return this._configuration.ppi||_.ppi}},{key:"resize",value:function(t){var e=this.getPPI(),n=this._configuration||{},r=n.width,o=n.height,i=t.clientWidth,u=t.clientHeight,a=t.offsetWidth,c=t.offsetHeight,s=r||i||a||window.innerWidth,f=o||u||c;return f||(f=Math.min(s/this._crop.getWidth()*this._crop.getHeight(),window.innerHeight)),this._multiple=Math.min(s/e*2.54/this._crop.getWidth(),f/e*2.54/this._crop.getHeight()),{width:s,height:f,boxWidth:Math.min(s,f/this._crop.getHeight()*this._crop.getWidth()),boxHeight:Math.min(f,s/this._crop.getWidth()*this._crop.getHeight())}}},{key:"getTransformation",value:function(){return this._transformation||(this._transformation=this._crop.getTransformation(this._multiple)),this._transformation}},{key:"addAnimation",value:function(t){this._animationManager.addAnimation(t)}},{key:"showBorder",value:function(){return((this._configuration||{}).border||{}).show}},{key:"showLabel",value:function(){return((this._configuration||{}).dataLabel||{}).show}},{key:"showIcon",value:function(){var t=(this._configuration||{}).dataMark||{},e=t.show,n=t.url;return e&&n}},{key:"showFlowing",value:function(){var t=(this._configuration||{}).flowing||{},e=t.show,n=t.url;return e&&n}},{key:"needAnimation",value:function(){return this.showFlowing()||this._animationManager.hasAnimation()}},{key:"configuration",value:function(){return this._configuration}},{key:"isAnimating",value:function(){return this._animating=!0}},{key:"onRender",value:function(t){this.addListener("render",t)}},{key:"offRender",value:function(t){this.removeListener("render",t)}},{key:"trigger",value:function(){this.emit("render")}},{key:"animate",value:function(){this._animating=!0,this.needAnimation()?(requestAnimationFrame(this.animate),this._animationManager.animate()):this._animating=!1,this.trigger()}}]),o}(j.EventEmitter);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}function W(t,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W(t,e)}function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=z(t);if(e){var o=z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}function H(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===I(o)?o:String(o)),r)}var o}function G(t,e,n){return e&&U(t.prototype,e),n&&U(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Z=function(){function t(e,n){H(this,t),this._context=e}return G(t,[{key:"dispatch",value:function(t){}},{key:"getContext",value:function(){return this._context}},{key:"render",value:function(){return new r.Tme}}]),t}(),$=function(t){F(n,t);var e=N(n);function n(t,r,o){var i;return H(this,n),(i=e.call(this,t,o))._texture=r,i}return G(n,[{key:"getTexture",value:function(){return this._texture}}]),n}(Z),K=function(t){F(n,t);var e=N(n);function n(t,r){var o;return H(this,n),(o=e.call(this,t,r))._children=[],o}return G(n,[{key:"getName",value:function(){return""}},{key:"getChildren",value:function(){return this._children}},{key:"addChildren",value:function(t){this._children.push(t)}}]),n}(Z);function V(t){return null==t||""===t}function X(t,e,n){var r=e[t];V(r)||(n[t]=r)}function Y(t){return!V(t)&&"function"==typeof t}function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===q(o)?o:String(o)),r)}var o}function Q(t,e){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Q(t,e)}function tt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},et(t)}var nt=["color"],rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q(t,e)}(a,t);var e,n,o,i,u=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=et(o);if(i){var n=et(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return tt(t)}(this,t)});function a(t,e,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=u.call(this,t,n))._options={},r._size=e;var o=(_||{}).background;return nt.forEach((function(t){X(t,o||{},r._options),X(t,n,r._options)}),tt(r)),r}return e=a,(n=[{key:"_getColor",value:function(t){return Y(t)?t(this,this._feature):t}},{key:"render",value:function(){var t=this._options.color,e=this._size,n=e.width,o=e.height,i=new r.CP7({alpha:!0});return i.setSize(n,o),t&&(i.domElement.style.backgroundColor=this._getColor(t)),i}}])&&J(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Z);function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ot(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ot(o)?o:String(o)),r)}var o}function ut(t,e){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ut(t,e)}function at(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ct(t){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ct(t)}var st=["color","intensity"],ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ut(t,e)}(a,t);var e,n,o,i,u=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ct(o);if(i){var n=ct(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return at(t)}(this,t)});function a(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=u.call(this,t,e))._options={};var r=((_||{}).background||{}).light;return st.forEach((function(t){X(t,r||{},n._options),X(t,e,n._options)}),at(n)),n}return e=a,(n=[{key:"_getColor",value:function(t){var e=t;return Y(t)&&(e=t(this)),e.isColor?t:new r.Ilk(e)}},{key:"_generateLight",value:function(){var t=this._options,e=t.color,n=t.intensity;return new r.Mig(this._getColor(e),n)}},{key:"render",value:function(){return this._light=this._generateLight(),this._light}}])&&it(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Z);function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==lt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===lt(o)?o:String(o)),r)}var o}var pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"init",value:function(){}},{key:"isCompleted",value:function(){return!0}},{key:"stop",value:function(){}},{key:"animate",value:function(){}}])&&ht(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==yt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===yt(o)?o:String(o)),r)}var o}function dt(t,e){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dt(t,e)}function mt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _t(t){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_t(t)}var gt=["depth","color","emissive","roughness","metalness","opacity","transparent"],wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dt(t,e)}(a,t);var e,n,o,i,u=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_t(o);if(i){var n=_t(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mt(t)}(this,t)});function a(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(o=u.call(this,t,r))._feature=e,o._polygon=n,o._options={},gt.forEach((function(t){X(t,_,o._options),X(t,r,o._options)}),mt(o)),o}return e=a,(n=[{key:"_getColor",value:function(t){var e=t;return Y(t)&&(e=t(this,this._feature,this._polygon)),e.isColor?t:new r.Ilk(e)}},{key:"_generateGeometry",value:function(){var t=this._options.depth,e=this._context.getTransformation(),n=new r.bnF;return this._polygon.forEach((function(t,r){var o,i,u=(i=2,function(t){if(Array.isArray(t))return t}(o=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}}(o,i)||function(t,e){if(t){if("string"==typeof t)return vt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(t,e):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=u[0],c=u[1],s=e.transform({x:a,y:c}),f=s.x,l=s.y;0===r?n.moveTo(f,l):n.lineTo(f,l)})),new r.O7d(n,{depth:t,bevelEnabled:!1})}},{key:"_generateMaterial",value:function(){var t=this._options,e=t.color,n=t.emissive,o=t.roughness,i=t.metalness,u=t.opacity,a=t.transparent;return new r.Wid({color:this._getColor(e),emissive:n,roughness:o,metalness:i,opacity:u,side:r.ehD,transparent:a})}},{key:"_generateMesh",value:function(t,e){return new r.Kj0(t,e)}},{key:"render",value:function(){return this._geometry=this._generateGeometry(),this._material=this._generateMaterial(),this._mesh=this._generateMesh(this._geometry,this._material),this._mesh.layers.enable(1),this._mesh.name=this._name,this._mesh}}])&&bt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Z);function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ot(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ot(o)?o:String(o)),r)}var o}function St(t,e){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},St(t,e)}function xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kt(t)}var Et=["depthDelta","color","weight","events"],Rt=["depth"],Tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&St(t,e)}(a,t);var e,n,o,i,u=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kt(o);if(i){var n=kt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xt(t)}(this,t)});function a(t,e,n,r){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(o=u.call(this,t,r))._feature=e,o._polygon=n,o._options={},Rt.forEach((function(t){X(t,_,o._options),X(t,r,o._options)}),xt(o));var i=(_||{}).border;return Et.forEach((function(t){X(t,i||{},o._options),X(t,r,o._options)}),xt(o)),o}return e=a,(n=[{key:"_handleSelectEvent",value:function(){if(this._material){var t=((this._options.events||{}).select||{}).border;if(t){var e=t||{},n=e.color,r=e.weight,o={};n&&(o.color=this._getColor(n)),r&&(o.linewidth=r),this._material.setValues(o)}}}},{key:"_handleUnselectEvent",value:function(){if(this._material){var t=this._options,e=t.color,n=t.weight;this._material.setValues({color:this._getColor(e),linewidth:n})}}},{key:"dispatch",value:function(t){switch((t||{}).type){case"select":this._handleSelectEvent();break;case"unselect":this._handleUnselectEvent()}}},{key:"_getColor",value:function(t){var e=t;return Y(t)&&(e=t(this,this._feature,this._polygon)),e.isColor?t:new r.Ilk(e)}},{key:"_generateGeometry",value:function(){var t=this._options,e=t.depth,n=t.depthDelta,o=this._context.getTransformation(),i=[];return this._polygon.forEach((function(t){var u,a,c=(a=2,function(t){if(Array.isArray(t))return t}(u=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}}(u,a)||function(t,e){if(t){if("string"==typeof t)return jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(t,e):void 0}}(u,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],f=c[1],l=o.transform({x:s,y:f}),h=l.x,p=l.y;i.push(new r.Pa4(h,p,e+n))})),(new r.u9r).setFromPoints(i)}},{key:"_generateMaterial",value:function(){var t=this._options,e=t.color,n=t.weight;return new r.nls({color:this._getColor(e),linewidth:n})}},{key:"_generateLine",value:function(t,e){return new r.x12(t,e)}},{key:"render",value:function(){return this._geometry=this._generateGeometry(),this._material=this._generateMaterial(),this._line=this._generateLine(this._geometry,this._material),this._line.layers.enable(2),this._line}}])&&Pt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Z);function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ct(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ct(o)?o:String(o)),r)}var o}function Mt(t,e){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mt(t,e)}function At(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dt(t){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dt(t)}var Bt=["className"],It=["backgroundColor","color","fontSize","fontWeight"],Ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mt(t,e)}(a,t);var e,n,r,i,u=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Dt(r);if(i){var n=Dt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return At(t)}(this,t)});function a(t,e,n,r,o){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(i=u.call(this,t,o))._feature=e,i._text=n,i._position=r,i._options={};var c=(_||{}).dataLabel;Bt.forEach((function(t){X(t,c||{},i._options),X(t,o,i._options)}),At(i));var s=(o||{}).style;return s&&Y(s)?X("style",{style:s},i._options):(i._options.style={},It.forEach((function(t){X(t,c&&c.style||{},i._options.style),X(t,s||{},i._options.style)}),At(i))),i}return e=a,(n=[{key:"_getColor",value:function(t){return Y(t)?t(this,this._feature):t}},{key:"_applyStyle",value:function(t){var e=this,n=this._options.style;n&&(Y(n)?n(this,this._feature,t):It.forEach((function(r){"color"===r?t.style.color=e._getColor(n[r]):X(r,n||{},t.style)}),this))}},{key:"_generateDocElement",value:function(){var t=this._options.className,e=document.createElement("div");return e.className=t,e.textContent=this._text,this._applyStyle(e),e.style.position="absolute",e.style.display="block",e.style.textAlign="center",e}},{key:"_generateLabel",value:function(t){var e=this._context.getTransformation().transform(this._position),n=e.x,r=e.y,i=new o.j(t);return i.position.x=n,i.position.y=r,i}},{key:"render",value:function(){return this._docElement=this._generateDocElement(),this._label=this._generateLabel(this._docElement),this._label}}])&&Lt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Z);function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Wt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Wt(o)?o:String(o)),r)}var o}function zt(t,e){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zt(t,e)}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ut(t){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ut(t)}var Gt=["scale","transparent"],Zt=["depth"],$t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zt(t,e)}(a,t);var e,n,o,i,u=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ut(o);if(i){var n=Ut(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Wt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ht(t)}(this,t)});function a(t,e,n,r,o){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(i=u.call(this,t,n,o))._feature=e,i._position=r,i._options={},Zt.forEach((function(t){X(t,_,i._options),X(t,o,i._options)}),Ht(i));var c=(_||{}).dataMark;return Gt.forEach((function(t){X(t,c||{},i._options),X(t,o,i._options)}),Ht(i)),i}return e=a,(n=[{key:"_generateMaterial",value:function(){var t=this._options.transparent;return new r.xeV({map:this.getTexture(),transparent:t})}},{key:"_generateSprite",value:function(t){var e=this._options,n=e.depth,o=e.scale,i=this._context.getTransformation().transform(this._position),u=i.x,a=i.y,c=new r.jyi(t);return c.scale.set(o,o,o),c.position.set(u,a,n),c.renderOrder=1,c}},{key:"render",value:function(){return this._material=this._generateMaterial(),this._sprite=this._generateSprite(this._material),this._sprite.layers.enable(2),this._sprite}}])&&Nt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}($);function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Xt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=ee(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ee(r.key),r)}}function te(t,e,n){return e&&Qt(t.prototype,e),n&&Qt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ee(t){var e=function(t,e){if("object"!==Kt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Kt(e)?e:String(e)}function ne(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&re(t,e)}function re(t,e){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},re(t,e)}function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ue(t);if(e){var o=ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ie(t)}(this,n)}}function ie(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(t){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ue(t)}var ae=["id","name","center","depth","color","emissive","roughness","metalness","opacity","transparent","border","dataLabel","dataMark","events"],ce=function(t){ne(n,t);var e=oe(n);function n(t,r,o,i){var u;return Jt(this,n),(u=e.call(this))._target=t,u._fromZ=r,u._toZ=o,u._callback=i,u._step=(o-r)/25,u}return te(n,[{key:"init",value:function(){this._target.position.z=this._fromZ}},{key:"stop",value:function(){this._callback&&this._callback()}},{key:"isCompleted",value:function(){return this._step>0?this._fromZ>=this._toZ:this._fromZ<=this._toZ}},{key:"animate",value:function(){this._fromZ+=this._step,this._target.position.z=this._fromZ}}]),n}(pt),se=function(t){ne(n,t);var e=oe(n);function n(t,r,o,i){var u;Jt(this,n),(u=e.call(this,t,i))._resourceManager=r,u._feature=o,u._options={},ae.forEach((function(t){X(t,_,u._options),X(t,i,u._options)}),ie(u)),u._animating=!1,u._generateIcon=u._generateIcon.bind(ie(u)),u._onEventCompleted=u._onEventCompleted.bind(ie(u));var a=u._options.id;return u._name=u._index(a),u}return te(n,[{key:"getName",value:function(){return this._name}},{key:"_index",value:function(t){return Y(t)?t(this._feature):this._feature[t]}},{key:"_onEventCompleted",value:function(){this._animating=!1}},{key:"_handleSelectEvent",value:function(t){var e=this;if(!this._animating){this._animating=!0;var n=this._options,r=n.depth,o=(n.events||{}).select;if(o){this.getChildren().forEach((function(e){e.dispatch(t)}));var i=o||{},u=i.depthDelta,a=i.onSelect,c=new ce(this._target,0,u||r,this._onEventCompleted);c.init(),this._context.addAnimation(c),this._context.isAnimating||this._context.animate(),a&&new Promise((function(t){t(a)})).then((function(n){n(e,t,e._feature)})).catch((function(t){}))}}}},{key:"_handleUnselectEvent",value:function(t){var e=this;if(!this._animating){this._animating=!0;var n=this._options,r=n.depth,o=(n.events||{}).select;if(o){this.getChildren().forEach((function(e){e.dispatch(t)}));var i=o||{},u=i.depthDelta,a=i.onSelect,c=new ce(this._target,u||r,0,this._onEventCompleted);c.init(),this._context.addAnimation(c),this._context.isAnimating||this._context.animate(),a&&new Promise((function(t){t(a)})).then((function(n){n(e,t,e._feature)})).catch((function(t){}))}}}},{key:"dispatch",value:function(t){switch((t||{}).type){case"select":this._handleSelectEvent(t);break;case"unselect":this._handleUnselectEvent(t)}}},{key:"_generateBlock",value:function(t){return new wt(this._context,this._feature,t,this._options)}},{key:"_generateBorder",value:function(t){var e=this._options,n=e.depth,r=e.border,o=e.events;return new Tt(this._context,this._feature,t,qt(qt({},r||{}),{},{depth:n,events:o}))}},{key:"_generateLabel",value:function(t,e){var n=e.x,r=e.y,o=this._options,i=o.depth,u=o.dataLabel,a=o.events;return new Ft(this._context,this._feature,t,{x:n,y:r},qt(qt({},u||{}),{},{depth:i,events:a}))}},{key:"_generateIcon",value:function(t,e){t.offCompleted(this._generateIcon);var n=this._options,r=n.depth,o=n.dataMark,i=n.events,u=Vt((0,this._options.center)(this._feature),2),a=u[0],c=u[1],s=new $t(this._context,this._feature,e,{x:a,y:c},qt(qt({},o||{}),{},{depth:r,events:i}));this._target.add(s.render()),this.addChildren(s),this._context.needAnimation()||this._context.trigger()}},{key:"_lazyGenerateIcon",value:function(){var t=(this._options.dataMark||{}).url;t&&this._resourceManager.getResourceLoader(t).onCompleted(this._generateIcon)}},{key:"render",value:function(){var t=this;this._target=new r.Tme;var e=this._feature.geometry,n=e.coordinates,o=e.type;if(n.forEach((function(e){var n=new r.Tme;if("MultiPolygon"===o)e.forEach((function(e){var r=t._generateBlock(e);if(t.addChildren(r),n.add(r.render()),t._context.showBorder()){var o=t._generateBorder(e);t.addChildren(o),n.add(o.render())}}));else{var i=t._generateBlock(e);if(t.addChildren(i),n.add(i.render()),t._context.showBorder()){var u=t._generateBorder(e);t.addChildren(u),n.add(u.render())}}t._target.add(n)}),this),this._context.showLabel()){var i=this._options,u=i.center,a=i.name,c=Vt(u(this._feature),2),s=c[0],f=c[1],l=a(this._feature);if(l){var h=this._generateLabel(l,{x:s,y:f});this._target.add(h.render()),this.addChildren(h)}}return this._context.showIcon()&&this._lazyGenerateIcon(),this._target.name=this._name,this._target}}]),n}(K);function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==fe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===fe(o)?o:String(o)),r)}var o}function he(t,e){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},he(t,e)}function pe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ye(t){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ye(t)}var ve=["minDepthDelta","maxDepthDelta","weight"],be=["depth"],de=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&he(t,e)}(a,t);var e,n,o,i,u=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ye(o);if(i){var n=ye(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pe(t)}(this,t)});function a(t,e,n,r,o){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(i=u.call(this,t,e,o))._startPoint=n,i._endPoint=r,i._options={},be.forEach((function(t){X(t,_,i._options),X(t,o,i._options)}),pe(i));var c=(_||{}).flowing;return ve.forEach((function(t){X(t,c||{},i._options),X(t,o,i._options)}),pe(i)),i}return e=a,(n=[{key:"_generateGeometry",value:function(){var t=this._options,e=t.depth,n=t.minDepthDelta,o=t.maxDepthDelta,i=t.weight,u=this._context.getTransformation(),a=u.transform(this._startPoint),c=u.transform(this._endPoint),s=(c.x-a.x)/3,f=(c.y-a.y)/3,l=[new r.Pa4(a.x,a.y,e+n),new r.Pa4(a.x+s,a.y+f,e+o),new r.Pa4(a.x+2*s,a.y+2*f,e+o),new r.Pa4(c.x,c.y,e+n)],h=new r.YT8(l),p=Math.ceil(Math.abs(3*s/.01));return new r.WXh(h,p,i,5*p)}},{key:"_generateMaterial",value:function(){return new r.vBJ({map:this.getTexture(),side:r.ehD,transparent:!0})}},{key:"_generateMesh",value:function(t,e){return new r.Kj0(t,e)}},{key:"render",value:function(){return this._geometry=this._generateGeometry(),this._material=this._generateMaterial(),this._mesh=this._generateMesh(this._geometry,this._material),this._mesh.name="lights",this._mesh.layers.enable(2),this._mesh}}])&&le(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}($);function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function _e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ge(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function we(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==me(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===me(o)?o:String(o)),r)}var o}function je(t,e,n){return e&&Oe(t.prototype,e),n&&Oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ee(t);if(e){var o=Ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===me(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ke(t)}(this,n)}}function ke(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ee(t){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ee(t)}var Re=["url","minDepthDelta","maxDepthDelta","weight","series"],Te=["id","center","depth"],Ce=function(t){Pe(n,t);var e=xe(n);function n(t){var r;return we(this,n),(r=e.call(this))._texture=t,r._step=.01,r}return je(n,[{key:"isCompleted",value:function(){}},{key:"animate",value:function(){this._texture.offset.x-=this._step}}]),n}(pt),Le=function(t){Pe(n,t);var e=xe(n);function n(t,r,o,i){var u;we(this,n),(u=e.call(this,t,i))._features=o,u._resourceManager=r,u._options={},Te.forEach((function(t){X(t,_,u._options),X(t,i,u._options)}),ke(u));var a=(_||{}).flowing;return Re.forEach((function(t){X(t,a||{},u._options),X(t,i,u._options)}),ke(u)),u._generateFlowings=u._generateFlowings.bind(ke(u)),u}return je(n,[{key:"getName",value:function(){return"lights"}},{key:"_index",value:function(t,e){return Y(t)?t(e):e[t]}},{key:"_generateFlowings",value:function(t,e){var n=this;e.wrapS=r.rpg,e.wrapT=r.rpg,e.repeat.set(1,1),e.needsUpdate=!0;var o=this._options.series;o&&o.length&&o.forEach((function(t){if(t.start!==t.end){var r=n._generateFlowing(t,e);r&&n._target.add(r.render())}}),this);var i=new Ce(e);i.init(),this._context.addAnimation(i)}},{key:"_generateFlowing",value:function(t,e){var n=this,r=this._options,o=r.id,i=r.center,u=t.start,a=t.end,c=this._features.find((function(t){return n._index(o,t)===u}),this),s=this._features.find((function(t){return n._index(o,t)===a}),this);if(c&&s){var f=i(c),l=i(s);if(f&&l){var h=_e(f,2),p=h[0],y=h[1],v=_e(l,2),b=v[0],d=v[1];return new de(this._context,e,{x:p,y},{x:b,y:d},this._options)}}return null}},{key:"_lazyGenerateFlowings",value:function(){var t=this._options.url;this._resourceManager.getResourceLoader(t).onCompleted(this._generateFlowings)}},{key:"render",value:function(){return this._target=new r.Tme,this._lazyGenerateFlowings(),this._target}}]),n}(K);function Me(t){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(t)}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Me(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Me(o)?o:String(o)),r)}var o}function De(t,e){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},De(t,e)}function Be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ie(t){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ie(t)}var Fe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&De(t,e)}(a,t);var e,n,o,i,u=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ie(o);if(i){var n=Ie(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Me(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Be(t)}(this,t)});function a(t,e,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(i=u.call(this))._context=t,i._scene=e,i._camera=n,i._container=o,i._raycaster=new r.iMs,i._raycaster.layers.set(1),i._onListen=i._onListen.bind(Be(i)),i}return e=a,(n=[{key:"onDispatch",value:function(t){this.addListener("dispatch",t)}},{key:"offDispatch",value:function(t){this.removeListener("dispatch",t)}},{key:"_getTargetName",value:function(t){for(var e=t.object,n=e.name,r=e.parent;!n&&r;)n=r.name,r=r.parent;return n}},{key:"_onListen",value:function(t){if(!this._on){this._on=!0;var e=t.clientX,n=t.clientY,r=this._container,o=r.clientWidth,i=r.clientHeight,u=r.offsetWidth,a=r.offsetHeight,c={x:e/(o||u||window.innerWidth)*2-1,y:-n/(i||a||window.innerHeight)*2+1};this._raycaster.setFromCamera(c,this._camera);var s=this._raycaster.intersectObjects(this._scene.children,!0),f="";if(s&&s.length)for(var l=s.length,h=0;h<l;h++){var p=s[h];if(f=this._getTargetName(p))break}f&&this.emit("dispatch",{type:"click",target:f,position:{x:e,y:n}}),this._on=!1}}},{key:"listen",value:function(){this._container.addEventListener("pointerdown",this._onListen)}},{key:"stop",value:function(){this._container.removeEventListener("pointerdown",this._onListen)}}])&&Ae(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(j.EventEmitter);function We(t){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(t)}function Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==We(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===We(o)?o:String(o)),r)}var o}function He(t,e,n){return e&&ze(t.prototype,e),n&&ze(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ue(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ge(t,e)}function Ge(t,e){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ge(t,e)}function Ze(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$e(t);if(e){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===We(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function $e(t){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$e(t)}var Ke=function(t){Ue(n,t);var e=Ze(n);function n(t){return Ne(this,n),e.call(this,t)}return He(n,[{key:"onCompleted",value:function(t){this._texture?t(this,this._texture):this.addListener("completed",t)}},{key:"getResource",value:function(){return this._texture}},{key:"load",value:function(){var t=this;this._texture?this.emit("completed",this,this._texture):(new r.dpR).load(this._url,(function(e){t._texture=e,t.emit("completed",t,t._texture)}))}}]),n}(function(t){Ue(n,t);var e=Ze(n);function n(t){var r;return Ne(this,n),(r=e.call(this))._url=t,r.setMaxListeners(100),r}return He(n,[{key:"getUrl",value:function(){return this._url}},{key:"onCompleted",value:function(t){this.addListener("completed",t)}},{key:"offCompleted",value:function(t){this.removeListener("completed",t)}},{key:"getResource",value:function(){return null}},{key:"load",value:function(){this.emit("completed",this,this.getResource())}}]),n}(j.EventEmitter));function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ve(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ve(o)?o:String(o)),r)}var o}var Ye=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._context=e,this._resourceLoaders=[]}var e,n;return e=t,(n=[{key:"getResourceLoader",value:function(t){var e=this._resourceLoaders.find((function(e){return e.getUrl()===t}));return e||(e=new Ke(t),this._resourceLoaders.push(e)),e}},{key:"addResourceLoader",value:function(t){this._resourceLoaders.push(t)}},{key:"load",value:function(){this._resourceLoaders.forEach((function(t){t.load()})),this._context.needAnimation()||this._context.trigger()}}])&&Xe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qe(t){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qe(t)}function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=rn(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function en(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rn(r.key),r)}}function nn(t,e,n){return e&&en(t.prototype,e),n&&en(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rn(t){var e=function(t,e){if("object"!==qe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===qe(e)?e:String(e)}var on=function(){function t(e,n){tn(this,t),this._context=new B(e),this._resourceManager=new Ye(this._context),this._data=n,this._selected="",this._children=[],this._flush=this._flush.bind(this),this._dispatch=this._dispatch.bind(this)}return nn(t,[{key:"_flush",value:function(){this._scene&&this._camera&&this._render&&(this._render.render(this._scene,this._camera),this._labelRender&&this._labelRender.render(this._scene,this._camera))}},{key:"_dispatch",value:function(t){var e=this,n=t||{},r=n.type,o=n.target;"click"===r&&(this._selected===o?(this._children.find((function(t){return t.getName()===o})).dispatch(Qe(Qe({},t),{},{type:"unselect"})),this._selected=null):(this._children.find((function(t){return t.getName()===o})).dispatch(Qe(Qe({},t),{},{type:"select"})),this._selected&&this._children.find((function(t){return t.getName()===e._selected})).dispatch(Qe(Qe({},t),{},{type:"unselect"})),this._selected=o))}},{key:"destroy",value:function(){var t=this;if(this._context.offRender(this._flush),this._eventManager&&(this._eventManager.offDispatch(this._dispatch),this._eventManager.stop(),this._eventManager=null),this._selected=!1,this._scene&&this._camera&&this._render&&(this._render.clear(),this._render=null,this._scene.clear(),this._scene=null,this._camera.clear(),this._camera=null),this._container){var e=this._container.children;e&&e.length&&e.forEach((function(e){t._container.removeChild(e)}),this)}this._children.splice(0,this._children.length)}},{key:"_generateScene",value:function(){var t=((this._context.configuration()||{}).background||{}).light,e=new r.xsS,n=new ft(this._context,Qe({},t||{}));return e.add(n.render()),e}},{key:"_generateCamera",value:function(t){var e=t.width,n=t.height,o=t.boxWidth,i=t.boxHeight,u=new r.cPb(75,e/n,.1,1e3);return u.position.y=0,u.position.x=0,u.position.z=Math.sqrt(Math.pow(o,2)+Math.pow(i,2))/this._context.getPPI()*2.54*.5,u}},{key:"_generateRender",value:function(t){var e=t.width,n=t.height,r=(this._context.configuration()||{}).background;return new rt(this._context,{width:e,height:n},Qe({},r||{})).render()}},{key:"_generateLabelRender",value:function(t){var e=t.width,n=t.height,r=new o.M;return r.setSize(e,n),r.domElement.style.position="absolute",r.domElement.style.top="0px",r}},{key:"_generateMap",value:function(){var t=this,e=new r.Tme,n=this._context.configuration();if(this._data.features.forEach((function(r){var o=new se(t._context,t._resourceManager,r,n);t._children.push(o),e.add(o.render())}),this),this._context.showFlowing()){var o=n.flowing,i=n.depth,u=new Le(this._context,this._resourceManager,this._data.features,Qe(Qe({},o||{}),{},{depth:i}));e.add(u.render())}return e}},{key:"_initSize",value:function(){var t=this;this._data.features.forEach((function(e){var n=e.geometry,r=n.coordinates,o=n.type;r.forEach((function(e){e.forEach((function(e){"MultiPolygon"===o?e.forEach((function(e){t._context.grope(e)}),t):t._context.grope(item)}),t)}),t)}),this)}},{key:"render",value:function(t){this._container=t,this._initSize(),this._scene=this._generateScene();var e=this._context.resize(this._container),n=e.width,r=e.height,o=e.boxWidth,i=e.boxHeight;this._camera=this._generateCamera({width:n,height:r,boxWidth:o,boxHeight:i});var u=this._generateMap();this._scene.add(u),this._render=this._generateRender({width:n,height:r}),this._container.appendChild(this._render.domElement),this._context.showLabel()&&(this._labelRender=this._generateLabelRender({width:n,height:r}),this._container.appendChild(this._labelRender.domElement)),this._context.onRender(this._flush),this._context.needAnimation()?this._context.animate():this._context.trigger(),this._resourceManager.load(),this._eventManager=new Fe(this._context,this._scene,this._camera,this._container),this._eventManager.onDispatch(this._dispatch),this._eventManager.listen()}}]),t}(),un=function(){function t(e,n){tn(this,t),this._map=new on(e,n)}return nn(t,[{key:"destroy",value:function(){this._map.destroy()}},{key:"render",value:function(t){this._map.render(t)}}]),t}();window.V3Map=un}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.m=e,t=[],r.O=(e,n,o,i)=>{if(!n){var u=1/0;for(f=0;f<t.length;f++){for(var[n,o,i]=t[f],a=!0,c=0;c<n.length;c++)(!1&i||u>=i)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(a=!1,i<u&&(u=i));if(a){t.splice(f--,1);var s=o();void 0!==s&&(e=s)}}return e}i=i||0;for(var f=t.length;f>0&&t[f-1][2]>i;f--)t[f]=t[f-1];t[f]=[n,o,i]},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={896:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,i,[u,a,c]=n,s=0;if(u.some((e=>0!==t[e]))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(c)var f=c(r)}for(e&&e(n);s<u.length;s++)i=u[s],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(f)},n=self.webpackChunkv3map=self.webpackChunkv3map||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var o=r.O(void 0,[841],(()=>r(210)));o=r.O(o)})();